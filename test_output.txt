============================= test session starts =============================
platform win32 -- Python 3.14.0, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\prodo\Antigrav projects\Gosling2\Gosling2\.venv\Scripts\python.exe
cachedir: .pytest_cache
PyQt6 6.10.1 -- Qt runtime 6.10.1 -- Qt compiled 6.10.0
rootdir: C:\Users\prodo\Antigrav projects\Gosling2\Gosling2
configfile: pyproject.toml
plugins: cov-7.0.0, qt-4.5.0
collecting ... collected 135 items

tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogInsert::test_log_insert_creates_change_logs PASSED [  0%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogInsert::test_log_insert_skips_none_values PASSED [  1%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogInsert::test_log_insert_handles_empty_data PASSED [  2%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogInsert::test_log_insert_normalizes_lists PASSED [  2%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogUpdate::test_log_update_detects_changes PASSED [  3%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogUpdate::test_log_update_skips_if_no_changes PASSED [  4%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogUpdate::test_log_update_handles_empty_data PASSED [  5%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogUpdate::test_log_update_detects_list_changes PASSED [  5%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogUpdate::test_log_update_detects_field_addition PASSED [  6%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogUpdate::test_log_update_detects_field_removal PASSED [  7%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogDelete::test_log_delete_archives_snapshot PASSED [  8%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogDelete::test_log_delete_handles_empty_data PASSED [  8%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogDelete::test_log_delete_serializes_complex_data PASSED [  9%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogAction::test_log_action_with_all_params PASSED [ 10%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogAction::test_log_action_with_minimal_params PASSED [ 11%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestLogAction::test_log_action_with_none_details PASSED [ 11%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestNormalization::test_normalize_primitives PASSED [ 12%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestNormalization::test_normalize_booleans PASSED [ 13%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestNormalization::test_normalize_lists PASSED [ 14%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestNormalization::test_normalize_none_values PASSED [ 14%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestDiffCalculation::test_diff_detects_simple_changes PASSED [ 15%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestDiffCalculation::test_diff_detects_field_addition PASSED [ 16%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestDiffCalculation::test_diff_detects_field_removal PASSED [ 17%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestDiffCalculation::test_diff_returns_empty_for_identical PASSED [ 17%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestDiffCalculation::test_diff_handles_list_order_changes PASSED [ 18%]
tests/unit/core/test_audit_logger.py::TestAuditLogger::TestDiffCalculation::test_diff_detects_boolean_changes PASSED [ 19%]
tests/unit/core/test_logger.py::TestLogger::TestLoggerCore::test_setup_singleton PASSED [ 20%]
tests/unit/core/test_logger.py::TestLogger::TestLoggerCore::test_dev_warning PASSED [ 20%]
tests/unit/core/test_logger.py::TestLogger::TestLoggerCore::test_formatted_methods PASSED [ 21%]
tests/unit/core/test_logger.py::TestLogger::TestObserverLogic::test_user_warning_notification PASSED [ 22%]
tests/unit/core/test_logger.py::TestLogger::TestObserverLogic::test_duplicate_subscription_prevented PASSED [ 22%]
tests/unit/core/test_logger.py::TestLogger::TestObserverLogic::test_unsubscribe PASSED [ 23%]
tests/unit/core/test_logger.py::TestLogger::TestObserverLogic::test_observer_exception_safety PASSED [ 24%]
tests/unit/core/test_logger.py::TestLogger::TestThreadSafety::test_concurrent_subscription PASSED [ 25%]
tests/unit/core/test_yellberus.py::test_registry_has_fields PASSED       [ 25%]
tests/unit/core/test_yellberus.py::test_get_field_lookup PASSED          [ 26%]
tests/unit/core/test_yellberus.py::test_visible_fields PASSED            [ 27%]
tests/unit/core/test_yellberus.py::test_filterable_fields PASSED         [ 28%]
tests/unit/core/test_yellberus.py::test_decade_grouper PASSED            [ 28%]
tests/unit/core/test_yellberus.py::test_field_properties PASSED          [ 29%]
tests/unit/core/test_yellberus.py::test_validate_schema PASSED           [ 30%]
tests/unit/core/test_yellberus.py::test_portable_flag PASSED             [ 31%]
tests/unit/core/test_yellberus.py::test_row_to_tagged_tuples PASSED      [ 31%]
tests/unit/core/test_yellberus.py::test_song_from_row PASSED             [ 32%]
tests/unit/core/test_yellberus_mutation.py::TestISRCValidationMutation::test_isrc_null_bytes PASSED [ 33%]
tests/unit/core/test_yellberus_mutation.py::TestISRCValidationMutation::test_isrc_exhaustion PASSED [ 34%]
tests/unit/core/test_yellberus_mutation.py::TestISRCValidationMutation::test_isrc_sql_injection_attempt PASSED [ 34%]
tests/unit/core/test_yellberus_mutation.py::TestISRCValidationMutation::test_isrc_unicode_emoji PASSED [ 35%]
tests/unit/core/test_yellberus_mutation.py::TestISRCValidationMutation::test_isrc_none_handling PASSED [ 36%]
tests/unit/core/test_yellberus_mutation.py::TestISRCValidationMutation::test_isrc_empty_handling PASSED [ 37%]
tests/unit/core/test_yellberus_mutation.py::TestISRCValidationMutation::test_yellberus_pattern_fallback PASSED [ 37%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestBasicCRUD::test_find_by_title_case_insensitive PASSED [ 38%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestBasicCRUD::test_update_album PASSED [ 39%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestBasicCRUD::test_get_or_create PASSED [ 40%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestBasicCRUD::test_create_with_album_artist PASSED [ 40%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestBasicCRUD::test_delete_album_integrity PASSED [ 41%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestMultiAlbumSupport::test_song_on_multiple_albums PASSED [ 42%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestMultiAlbumSupport::test_remove_song_from_album PASSED [ 42%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestMultiAlbumSupport::test_sync_album_replacement PASSED [ 43%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestAlbumDisambiguation::test_greatest_hits_different_artists PASSED [ 44%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestAlbumDisambiguation::test_same_artist_different_years PASSED [ 45%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestAlbumDisambiguation::test_same_artist_same_year_reuses PASSED [ 45%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestAlbumDisambiguation::test_null_artist_handling PASSED [ 46%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestAlbumDisambiguation::test_artist_case_insensitive PASSED [ 47%]
tests/unit/data/repositories/test_album_repository.py::TestAlbumRepository::TestAlbumDisambiguation::test_find_by_key_with_all_fields PASSED [ 48%]
tests/unit/data/repositories/test_album_repository_mutation.py::TestAlbumRepositorySecurity::test_bobby_tables_album_artist PASSED [ 48%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestChangeLogOperations::test_insert_single_change_log PASSED [ 49%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestChangeLogOperations::test_insert_bulk_change_logs PASSED [ 50%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestChangeLogOperations::test_insert_empty_change_logs PASSED [ 51%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestChangeLogOperations::test_insert_change_log_with_null_values PASSED [ 51%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestDeletedRecordOperations::test_insert_deleted_record PASSED [ 52%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestDeletedRecordOperations::test_insert_multiple_deleted_records PASSED [ 53%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestDeletedRecordOperations::test_deleted_record_preserves_snapshot PASSED [ 54%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestActionLogOperations::test_insert_action_log_full_params PASSED [ 54%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestActionLogOperations::test_insert_action_log_minimal_params PASSED [ 55%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestActionLogOperations::test_insert_multiple_action_logs PASSED [ 56%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestFailSecureBehavior::test_change_log_propagates_errors PASSED [ 57%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestFailSecureBehavior::test_deleted_record_propagates_errors PASSED [ 57%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestFailSecureBehavior::test_action_log_propagates_errors PASSED [ 58%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestTransactionalIntegrity::test_change_logs_in_transaction PASSED [ 59%]
tests/unit/data/repositories/test_audit_repository.py::TestAuditRepository::TestTransactionalIntegrity::test_rollback_includes_audit_logs PASSED [ 60%]
tests/unit/data/repositories/test_contributor_repository.py::TestGetById::test_get_by_id_success PASSED [ 60%]
tests/unit/data/repositories/test_contributor_repository.py::TestGetById::test_get_by_id_not_found PASSED [ 61%]
tests/unit/data/repositories/test_contributor_repository.py::TestCreateContributor::test_create_person PASSED [ 62%]
tests/unit/data/repositories/test_contributor_repository.py::TestCreateContributor::test_create_group PASSED [ 62%]
tests/unit/data/repositories/test_contributor_repository.py::TestCreateContributor::test_create_auto_generates_sort_name PASSED [ 63%]
tests/unit/data/repositories/test_contributor_repository.py::TestSearch::test_search_returns_contributors PASSED [ 64%]
tests/unit/data/repositories/test_contributor_repository.py::TestSearch::test_search_empty_string_returns_all PASSED [ 65%]
tests/unit/data/repositories/test_contributor_repository.py::TestGetOrCreate::test_get_or_create_existing PASSED [ 65%]
tests/unit/data/repositories/test_contributor_repository.py::TestGetOrCreate::test_get_or_create_new PASSED [ 66%]
tests/unit/data/repositories/test_contributor_repository.py::TestAliasManagement::test_get_aliases PASSED [ 67%]
tests/unit/data/repositories/test_contributor_repository.py::TestAliasManagement::test_add_alias PASSED [ 68%]
tests/unit/data/repositories/test_contributor_repository.py::TestAliasManagement::test_delete_alias PASSED [ 68%]
tests/unit/data/repositories/test_contributor_repository.py::TestMembership::test_get_members PASSED [ 69%]
tests/unit/data/repositories/test_contributor_repository.py::TestMembership::test_get_groups PASSED [ 70%]
tests/unit/data/repositories/test_contributor_repository.py::TestMembership::test_add_member PASSED [ 71%]
tests/unit/data/repositories/test_contributor_repository.py::TestMembership::test_remove_member PASSED [ 71%]
tests/unit/data/repositories/test_contributor_repository.py::TestMembership::test_get_member_count PASSED [ 72%]
tests/unit/data/repositories/test_contributor_repository.py::TestValidateIdentity::test_validate_identity_no_conflict PASSED [ 73%]
tests/unit/data/repositories/test_contributor_repository.py::TestValidateIdentity::test_validate_identity_conflict_with_primary PASSED [ 74%]
tests/unit/data/repositories/test_contributor_repository.py::TestResolveIdentityGraph::test_resolve_identity_graph_direct_match PASSED [ 74%]
tests/unit/data/repositories/test_contributor_repository.py::TestGetByRole::test_get_by_role_success PASSED [ 75%]
tests/unit/data/repositories/test_contributor_repository.py::TestGetByRole::test_get_by_role_error PASSED [ 76%]
tests/unit/data/repositories/test_contributor_repository.py::TestGetByRole::test_get_all_aliases PASSED [ 77%]
tests/unit/data/repositories/test_publisher_repository.py::TestPublisherRepository::test_create_and_get PASSED [ 77%]
tests/unit/data/repositories/test_publisher_repository.py::TestPublisherRepository::test_search PASSED [ 78%]
tests/unit/data/repositories/test_publisher_repository.py::TestPublisherRepository::test_update PASSED [ 79%]
tests/unit/data/repositories/test_publisher_repository.py::TestPublisherRepository::test_delete PASSED [ 80%]
tests/unit/data/repositories/test_publisher_repository.py::TestPublisherRepository::test_get_or_create PASSED [ 80%]
tests/unit/data/repositories/test_publisher_repository.py::TestPublisherRepository::test_hierarchy_descendants PASSED [ 81%]
tests/unit/data/repositories/test_publisher_repository.py::TestPublisherRepository::test_album_linking PASSED [ 82%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoCRUD::test_insert_and_get_by_path PASSED [ 82%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoCRUD::test_update_song PASSED [ 83%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoCRUD::test_delete_song PASSED [ 84%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoCRUD::test_get_all PASSED [ 85%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoLookups::test_get_by_path_found PASSED [ 85%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoLookups::test_get_by_path_not_found PASSED [ 86%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoLookups::test_get_by_performer PASSED [ 87%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoLookups::test_get_by_composer PASSED [ 88%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoLookups::test_get_by_year PASSED [ 88%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoEdgeCases::test_insert_duplicate_path PASSED [ 89%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoEdgeCases::test_song_object_mapping_integrity PASSED [ 90%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoEdgeCases::test_duplicate_paths_different_separators PASSED [ 91%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoEdgeCases::test_duplicate_paths_different_case PASSED [ 91%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoMultiAlbum::test_sync_album_non_destructive PASSED [ 92%]
tests/unit/data/repositories/test_song_repository.py::TestSongRepoMultiAlbum::test_sync_publisher_track_override PASSED [ 93%]
tests/unit/data/repositories/test_song_repository_mutation.py::TestSongRepositoryMutation::test_get_all_headers_integrity PASSED [ 94%]
tests/unit/data/repositories/test_song_repository_mutation.py::TestSongRepositoryMutation::test_get_by_performer_headers_integrity PASSED [ 94%]
tests/unit/data/repositories/test_song_repository_mutation.py::TestSongRepoSecurity::test_insert_malicious_filename PASSED [ 95%]
tests/unit/data/repositories/test_song_repository_mutation.py::TestSongRepoSecurity::test_update_malicious_artist_name PASSED [ 96%]
tests/unit/data/repositories/test_song_repository_mutation.py::TestSongRepoSecurity::test_unicode_and_international_characters PASSED [ 97%]
tests/unit/data/repositories/test_tag_repository.py::TestTagRepository::test_create_and_find PASSED [ 97%]
tests/unit/data/repositories/test_tag_repository.py::TestTagRepository::test_get_or_create PASSED [ 98%]
tests/unit/data/repositories/test_tag_repository.py::TestTagRepository::test_source_tagging PASSED [ 99%]
tests/unit/data/repositories/test_tag_repository.py::TestTagRepository::test_get_all_by_category PASSED [100%]

============================= 135 passed in 1.76s =============================
